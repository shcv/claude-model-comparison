{
  "section_id": "compaction",
  "review": {
    "intent": "Quantify context window compaction frequency, triggers, and post-compaction outcome effects while flagging the small sample sizes involved.",
    "focus": [
      "Verify compaction event counts and session rates match compaction-analysis.json",
      "Check that outcome correlation analysis acknowledges the task-ordering confound (compaction happens late in sessions where tasks are naturally harder)",
      "Ensure any compaction effect claims are presented with appropriate uncertainty given small sample sizes"
    ]
  },
  "data_sources": {
    "compaction": "analysis/compaction-analysis.json"
  },
  "tables": {
    "compaction-overview": {
      "title": "Compaction Overview",
      "data_source": "compaction",
      "row_gen": "compaction_overview"
    },
    "compaction-impact": {
      "title": "Compaction Outcome Impact",
      "data_source": "compaction",
      "row_gen": "compaction_impact"
    },
    "compaction-outcomes": {
      "title": "Pre/post compaction outcome data",
      "data_source": "compaction",
      "row_gen": "compaction_outcomes",
      "prose": {
        "guidance": "Discuss pre/post compaction outcome differences for each model. Note whether position-controlled effects differ from raw effects. Flag small sample sizes and the task-ordering confound (compaction happens late in sessions where tasks may be naturally harder)."
      }
    }
  },
  "prose": {
    "key_metrics": [
      "compaction.{model_a}.total_sessions",
      "compaction.{model_b}.total_sessions",
      "compaction.{model_a}.sessions_with_compaction",
      "compaction.{model_b}.sessions_with_compaction",
      "compaction.{model_a}.compaction_rate_pct",
      "compaction.{model_b}.compaction_rate_pct",
      "compaction.{model_a}.total_events",
      "compaction.{model_b}.total_events",
      "compaction.{model_a}.avg_pre_tokens",
      "compaction.{model_b}.avg_pre_tokens",
      "compaction.{model_a}.avg_events_per_compacting_session",
      "compaction.{model_b}.avg_events_per_compacting_session",
      "compaction.{model_a}.avg_position_pct",
      "compaction.{model_b}.avg_position_pct",
      "compaction.{model_a}.trigger_breakdown",
      "compaction.{model_b}.trigger_breakdown",
      "compaction.{model_a}.outcome_correlation.compacting",
      "compaction.{model_b}.outcome_correlation.compacting",
      "compaction.{model_a}.outcome_correlation.control",
      "compaction.{model_b}.outcome_correlation.control",
      "compaction.{model_a}.outcome_correlation.compaction_effect",
      "compaction.{model_b}.outcome_correlation.compaction_effect",
      "compaction.{model_a}.outcome_correlation.median_split_position_pct",
      "compaction.{model_b}.outcome_correlation.median_split_position_pct"
    ],
    "guidance": "This section covers context window compaction events. Verify stat-card values, bar-fill widths, and table cells match the data. Note that very small sample sizes limit the outcome correlation analysis. Present compaction effects with appropriate uncertainty given the available evidence."
  }
}
